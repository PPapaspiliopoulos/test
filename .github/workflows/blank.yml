name: build

on: [push]

jobs:
  B:
    runs-on: ubuntu-latest
    outputs:
      cond: False
    steps:
      - name: fail
        run:  echo "run"
  A:
    needs: [B]
    runs-on: ubuntu-latest
    environment: dev
    if: needs.B.outputs.cond == 'False'
    steps:
      - name: Check identity
        run: echo "B dev = ${{ vars.B }}"
  C:
    needs: [A]
    runs-on: ubuntu-latest
    steps:
      - name: Check identity
        run: echo "B dev = ${{ vars.B }}"
